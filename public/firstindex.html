<!-- firstindex.html -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FiveForces - 首页</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <!-- Tailwind配置 - 使用与其它页面一致的配色方案 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#f8faf7",
            secondary: "#FFFFFF",
            accent: "#4caf50",
            success: "#4caf50",
            danger: "#f44336",
            neutral: "#666666",
            "neutral-light": "#999999",
            "neutral-dark": "#333333",
            "border-color": "#e0e0e0",
          },
          fontFamily: {
            inter: ["Inter", "sans-serif"],
          },
        },
      },
    };
  </script>
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      .scrollbar-hide::-webkit-scrollbar {
        display: none;
      }
      .text-shadow {
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
      }
      .card-hover {
        transition: all 0.3s ease;
      }
      .card-hover:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05),
          0 10px 10px -5px rgba(0, 0, 0, 0.02);
      }
    }
  </style>
</head>
<body class="bg-primary text-neutral-dark font-inter min-h-screen flex flex-col">
  <!-- 顶部导航栏 -->
  <header class="bg-secondary border-b border-border-color sticky top-0 z-50 shadow-sm">
    <div class="container mx-auto px-4">
      <div class="flex items-center justify-between h-16">
        <!-- Logo和网站名称 -->
        <div class="flex items-center space-x-4">
          <div class="text-accent text-2xl font-bold">
            <i class="fa fa-line-chart mr-2"></i>FiveForces
          </div>
          <!-- 主导航 -->
          <nav class="hidden md:flex space-x-1">
            <a href="./firstindex.html" class="px-3 py-2 rounded-md text-secondary bg-accent text-sm font-medium" data-i18n="common-home">首页</a>
            <a href="./index.html" class="px-3 py-2 rounded-md text-neutral hover:text-neutral-dark hover:bg-neutral/10 text-sm font-medium transition-colors" data-i18n="common-details">详情</a>
            <a href="./positions.html" class="px-3 py-2 rounded-md text-neutral hover:text-neutral-dark hover:bg-neutral/10 text-sm font-medium transition-colors" data-i18n="common-portfolio">持仓</a>
            <a href="./news.html" class="px-3 py-2 rounded-md text-neutral hover:text-neutral-dark hover:bg-neutral/10 text-sm font-medium transition-colors" data-i18n="common-news">新闻</a>
          </nav>
        </div>
        <!-- 右侧功能区 -->
        <div class="flex items-center space-x-4">
          <!-- 搜索框 -->
          <div class="relative hidden md:block">
            <input type="text" placeholder="搜索股票、指数、加密货币..." class="bg-secondary border border-border-color rounded-md py-1.5 pl-9 pr-3 text-sm w-64 focus:outline-none focus:ring-1 focus:ring-accent focus:border-accent" data-i18n-placeholder="common-search-placeholder-news">
            <i class="fa fa-search absolute left-3 top-2 text-neutral"></i>
          </div>
          <!-- 快捷功能按钮 -->
          <button class="text-neutral hover:text-neutral-dark p-2 rounded-full hover:bg-neutral/10 transition-colors">
            <i class="fa fa-bell"></i>
          </button>
          <button class="text-neutral hover:text-neutral-dark p-2 rounded-full hover:bg-neutral/10 transition-colors">
            <i class="fa fa-cog"></i>
          </button>
          <!-- 语言切换按钮 -->
          <div class="relative">
            <button class="flex items-center space-x-1 focus:outline-none" id="languageToggle">
              <i class="fa fa-globe text-neutral"></i>
              <span id="languageText" class="hidden md:inline text-sm font-medium">EN</span>
            </button>
          </div>
          <!-- 用户菜单 -->
          <div class="relative">
            <button class="flex items-center space-x-1 focus:outline-none" id="userMenuButton">
              <img src="https://picsum.photos/id/1005/32/32" alt="用户头像" class="h-8 w-8 rounded-full object-cover border-2 border-neutral">
              <span id="usernameDisplay" class="hidden md:inline text-sm font-medium">Guest</span>
              <i class="fa fa-angle-down text-xs text-neutral"></i>
            </button>
            
            <!-- 下拉菜单 -->
            <div id="userDropdown" class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 hidden z-50">
              <a href="./personal-settings.html" class="block px-4 py-2 text-sm text-neutral hover:bg-primary" data-i18n="common-personal-settings">个人设置</a>
              <a href="./account-settings.html" class="block px-4 py-2 text-sm text-neutral hover:bg-primary" data-i18n="common-account-info">账户信息</a>
              <hr class="my-1">
              <a href="#" id="logoutButton" class="block px-4 py-2 text-sm text-danger hover:bg-primary" data-i18n="common-logout">
                <i class="fa fa-sign-out mr-2"></i>退出登录
              </a>
            </div>
          </div>
          <!-- 移动端菜单按钮 -->
                    <!-- 移动端菜单按钮 -->
          <button
            id="mobileMenuButton"
            class="md:hidden text-neutral hover:text-neutral-dark p-2 rounded-md hover:bg-neutral/10"
          >
            <i class="fa fa-bars"></i>
          </button>
        </div>
      </div>
    </div>
  </header>
  
  <!-- 移动端导航菜单 -->
  <div id="mobileMenu" class="md:hidden bg-secondary border-b border-border-color shadow-lg hidden">
    <nav class="container mx-auto px-4 py-4">
      <div class="flex flex-col space-y-2">
        <a
          href="./firstindex.html"
          class="px-3 py-2 rounded-md text-secondary bg-accent text-sm font-medium"
          data-i18n="common-home"
        >首页</a>
        <a
          href="./index.html"
          class="px-3 py-2 rounded-md text-neutral hover:text-neutral-dark hover:bg-neutral/10 text-sm font-medium transition-colors"
          data-i18n="common-details"
        >详情</a>
        <a
          href="./positions.html"
          class="px-3 py-2 rounded-md text-neutral hover:text-neutral-dark hover:bg-neutral/10 text-sm font-medium transition-colors"
          data-i18n="common-portfolio"
        >持仓</a>
        <a
          href="./news.html"
          class="px-3 py-2 rounded-md text-neutral hover:text-neutral-dark hover:bg-neutral/10 text-sm font-medium transition-colors"
          data-i18n="common-news"
        >新闻</a>
      </div>
    </nav>
  </div>
  
  <!-- 主内容区 -->
  <main class="flex-grow container mx-auto px-4 py-4">
    <!-- 市场概览 -->
    <section class="mb-6">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-semibold text-neutral-dark" data-i18n="market-overview">市场概览</h2>
        <div class="flex space-x-2">
          <button class="text-accent hover:text-accent/80 text-sm font-medium" data-i18n="view-all">
            查看全部 <i class="fa fa-angle-right ml-1"></i>
          </button>
        </div>
      </div>
      <!-- 主要指数 -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
        <!-- 指数卡片 -->
        <div class="bg-secondary rounded-lg p-4 border border-border-color card-hover shadow-sm">
          <div class="flex items-center justify-between mb-2">
            <div>
              <h3 class="font-medium text-neutral-dark" data-i18n="spx-name">标普 500</h3>
              <p class="text-xs text-neutral">.SPX</p>
            </div>
            <div class="text-right">
              <p class="font-semibold text-neutral-dark">4,587.23</p>
              <p class="text-success text-xs font-medium">+1.24% (56.78)</p>
            </div>
          </div>
          <div class="h-12">
            <canvas id="spxChart"></canvas>
          </div>
        </div>
        <div class="bg-secondary rounded-lg p-4 border border-border-color card-hover shadow-sm">
          <div class="flex items-center justify-between mb-2">
            <div>
              <h3 class="font-medium text-neutral-dark" data-i18n="ndx-name">纳斯达克 100</h3>
              <p class="text-xs text-neutral">.NDX</p>
            </div>
            <div class="text-right">
              <p class="font-semibold text-neutral-dark">15,763.45</p>
              <p class="text-success text-xs font-medium">+0.98% (153.62)</p>
            </div>
          </div>
          <div class="h-12">
            <canvas id="ndxChart"></canvas>
          </div>
        </div>
        <div class="bg-secondary rounded-lg p-4 border border-border-color card-hover shadow-sm">
          <div class="flex items-center justify-between mb-2">
            <div>
              <h3 class="font-medium text-neutral-dark" data-i18n="dji-name">道琼斯工业平均</h3>
              <p class="text-xs text-neutral">.DJI</p>
            </div>
            <div class="text-right">
              <p class="font-semibold text-neutral-dark">35,429.78</p>
              <p class="text-success text-xs font-medium">+0.87% (307.12)</p>
            </div>
          </div>
          <div class="h-12">
            <canvas id="djiChart"></canvas>
          </div>
        </div>
        <div class="bg-secondary rounded-lg p-4 border border-border-color card-hover shadow-sm">
          <div class="flex items-center justify-between mb-2">
            <div>
              <h3 class="font-medium text-neutral-dark" data-i18n="rut-name">罗素 2000</h3>
              <p class="text-xs text-neutral">.RUT</p>
            </div>
            <div class="text-right">
              <p class="font-semibold text-neutral-dark">2,356.89</p>
              <p class="text-danger text-xs font-medium">-0.42% (9.97)</p>
            </div>
          </div>
          <div class="h-12">
            <canvas id="rutChart"></canvas>
          </div>
        </div>
      </div>
    </section>
    <!-- 社区观点 -->
    <section class="mb-6">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-semibold text-neutral-dark" data-i18n="community-insights">社区观点</h2>
        <button class="text-accent hover:text-accent/80 text-sm font-medium" data-i18n="view-all-insights">
          查看全部 <i class="fa fa-angle-right ml-1"></i>
        </button>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4" id="newsContainer">
        <!-- 新闻卡片将通过JavaScript动态生成 -->
      </div>
    </section>
    <!-- 热门板块 -->
    <section class="mb-6">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-semibold text-neutral-dark" data-i18n="sector-performance">热门板块</h2>
        <button class="text-accent hover:text-accent/80 text-sm font-medium" data-i18n="view-all-sectors">
          查看全部 <i class="fa fa-angle-right ml-1"></i>
        </button>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <!-- 板块卡片 -->
        <div class="bg-secondary rounded-lg p-4 border border-border-color card-hover shadow-sm">
          <div class="flex items-center justify-between mb-4">
            <div class="flex items-center">
              <div class="h-10 w-10 rounded-md bg-blue-100 flex items-center justify-center mr-3">
                <i class="fa fa-microchip text-blue-500"></i>
              </div>
              <div>
                <h3 class="font-medium text-neutral-dark" data-i18n="tech">科技</h3>
                <p class="text-xs text-neutral" data-i18n="stock-count-1">124 只股票</p>
              </div>
            </div>
            <div class="text-right">
              <p class="text-success font-medium">+2.1%</p>
              <p class="text-xs text-neutral" data-i18n="today">今日</p>
            </div>
          </div>
          <div class="space-y-2">
            <div class="flex justify-between items-center">
              <div class="text-sm text-neutral-dark" data-i18n="nvidia">英伟达</div>
              <div class="text-success text-sm">+4.2%</div>
            </div>
            <div class="flex justify-between items-center">
              <div class="text-sm text-neutral-dark" data-i18n="meta">Meta</div>
              <div class="text-success text-sm">+2.8%</div>
            </div>
            <div class="flex justify-between items-center">
              <div class="text-sm text-neutral-dark" data-i18n="tsmc">台积电</div>
              <div class="text-success text-sm">+1.5%</div>
            </div>
          </div>
        </div>
        <div class="bg-secondary rounded-lg p-4 border border-border-color card-hover shadow-sm">
          <div class="flex items-center justify-between mb-4">
            <div class="flex items-center">
              <div class="h-10 w-10 rounded-md bg-green-100 flex items-center justify-center mr-3">
                <i class="fa fa-medkit text-green-500"></i>
              </div>
              <div>
                <h3 class="font-medium text-neutral-dark" data-i18n="healthcare">医疗保健</h3>
                <p class="text-xs text-neutral" data-i18n="stock-count-2">98 只股票</p>
              </div>
            </div>
            <div class="text-right">
              <p class="text-success font-medium">+1.3%</p>
              <p class="text-xs text-neutral" data-i18n="today">今日</p>
            </div>
          </div>
          <div class="space-y-2">
            <div class="flex justify-between items-center">
              <div class="text-sm text-neutral-dark" data-i18n="merck">默克</div>
              <div class="text-success text-sm">+2.3%</div>
            </div>
            <div class="flex justify-between items-center">
              <div class="text-sm text-neutral-dark" data-i18n="pfizer">辉瑞</div>
              <div class="text-danger text-sm">-0.5%</div>
            </div>
            <div class="flex justify-between items-center">
              <div class="text-sm text-neutral-dark" data-i18n="moderna">Moderna</div>
              <div class="text-success text-sm">+3.1%</div>
            </div>
          </div>
        </div>
        <div class="bg-secondary rounded-lg p-4 border border-border-color card-hover shadow-sm">
          <div class="flex items-center justify-between mb-4">
            <div class="flex items-center">
              <div class="h-10 w-10 rounded-md bg-red-100 flex items-center justify-center mr-3">
                <i class="fa fa-oil-well text-red-500"></i>
              </div>
              <div>
                <h3 class="font-medium text-neutral-dark" data-i18n="energy">能源</h3>
                <p class="text-xs text-neutral" data-i18n="stock-count-3">67 只股票</p>
              </div>
            </div>
            <div class="text-right">
              <p class="text-danger font-medium">-1.8%</p>
              <p class="text-xs text-neutral" data-i18n="today">今日</p>
            </div>
          </div>
          <div class="space-y-2">
            <div class="flex justify-between items-center">
              <div class="text-sm text-neutral-dark" data-i18n="exxon">埃克森美孚</div>
              <div class="text-danger text-sm">-2.1%</div>
            </div>
            <div class="flex justify-between items-center">
              <div class="text-sm text-neutral-dark" data-i18n="chevron">雪佛龙</div>
              <div class="text-danger text-sm">-1.5%</div>
            </div>
            <div class="flex justify-between items-center">
              <div class="text-sm text-neutral-dark" data-i18n="conocophillips">康菲石油</div>
              <div class="text-danger text-sm">-0.9%</div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
  
  <script src="./js/languages.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 用户菜单功能
      const userMenuButton = document.getElementById('userMenuButton');
      const userDropdown = document.getElementById('userDropdown');
      const logoutButton = document.getElementById('logoutButton');
      const mobileMenuButton = document.getElementById('mobileMenuButton');
      const mobileMenu = document.getElementById('mobileMenu');
      
      // 移动端菜单切换功能
      mobileMenuButton.addEventListener('click', function(e) {
        e.stopPropagation();
        mobileMenu.classList.toggle('hidden');
      });
      
      // 点击页面其他地方隐藏移动端菜单
      document.addEventListener('click', function(e) {
        if (!mobileMenuButton.contains(e.target) && !mobileMenu.contains(e.target)) {
          mobileMenu.classList.add('hidden');
        }
      });
      
      userMenuButton.addEventListener('click', function(e) {
        e.stopPropagation();
        userDropdown.classList.toggle('hidden');
      });
      
      document.addEventListener('click', function(e) {
        if (!userMenuButton.contains(e.target)) {
          userDropdown.classList.add('hidden');
        }
      });
      
      logoutButton.addEventListener('click', function(e) {
        e.preventDefault();
        localStorage.removeItem('isLoggedIn');
        localStorage.removeItem('username');
        localStorage.removeItem('accountId');
        window.location.href = './login.html';
      });
      // 页面加载时检查登录状态
      if (localStorage.getItem('isLoggedIn') !== 'true') {
        window.location.href = './login.html';
      } else {
        const username = localStorage.getItem('username');
        if (username) {
          document.getElementById('usernameDisplay').textContent = username;
        }
      }
      
      // 新闻数据库
      const newsData = [
        {
          id: 1,
          title: "你一直在亏损？不是因为方法，而是因为你的心态。",
          content: "你一直在亏损？不是因为方法，而是因为你的心态。先问问自己：你是不是一直在重复那些你明知道是错的交易习惯？你知道不该在没有信号的情况下进场——但你还是进了。你知道止...",
          author: "由NMFlowTrading提供",
          date: "7月26",
          comments: 1,
          likes: 5,
          image: "https://picsum.photos/300/150?random=1"
        },
        {
          id: 2,
          title: "利多用尽？美元背后的下行风险不容忽视",
          content: "在强劲非农就业报告后曾短暂反弹的美元，如今再度显得疲弱。近期DXY的上涨更像是长期跌势中的回调而非趋势反转。动能在关键阻力区消退，自7月初以来，美元指数（DXY）持...",
          author: "由Capitalcom提供",
          date: "7月23",
          comments: 1,
          likes: 4,
          image: "https://picsum.photos/300/150?random=2"
        },
        {
          id: 3,
          title: "21日黄金希望回踩3330，4H BB区域重新上涨",
          content: "黄金上周四美盘前清除了10日低点后开启了一轮上涨，期望周一低开回到3330区域，也就是回踩4H的破坏块区域，有反转信号，跟随做多，目标上方77，随后再逐步向上。",
          author: "由willsenwong提供",
          date: "7月19",
          comments: 0,
          likes: 13,
          image: "https://picsum.photos/300/150?random=3"
        },
        {
          id: 4,
          title: "半导体行业迎来复苏信号，多家龙头企业上调季度业绩预期",
          content: "半导体行业在经历了较长时间的低迷后，近期出现了明显的复苏迹象。多家行业龙头企业纷纷上调了第三季度的业绩预期，显示出对未来发展的信心...",
          author: "由TechAnalyst提供",
          date: "8月1",
          comments: 3,
          likes: 8,
          image: "https://picsum.photos/300/150?random=4"
        },
        {
          id: 5,
          title: "新能源板块持续走强，政策支持与需求增长双驱动",
          content: "新能源板块在政策支持和市场需求双重驱动下，持续展现出强劲的上涨动能。多只新能源概念股创下历史新高，投资者对该板块的关注度不断提升...",
          author: "由EnergyWatch提供",
          date: "8月1",
          comments: 5,
          likes: 12,
          image: "https://picsum.photos/300/150?random=5"
        },
        {
          id: 6,
          title: "北向资金连续五日净流入，A股市场信心逐步恢复",
          content: "北向资金连续五个交易日净流入A股市场，累计流入金额超过200亿元。这一现象表明海外资金对A股市场的信心正在逐步恢复，为市场带来了积极信号...",
          author: "由MarketFlow提供",
          date: "8月1",
          comments: 2,
          likes: 6,
          image: "https://picsum.photos/300/150?random=6"
        },
        {
          id: 7,
          title: "美股科技巨头财报季来袭，市场聚焦AI业务增长潜力",
          content: "随着财报季的到来，美股科技巨头们的业绩表现备受市场关注。投资者特别关注各大公司在人工智能领域的业务进展和增长潜力...",
          author: "由USMarkets提供",
          date: "7月30",
          comments: 4,
          likes: 9,
          image: "https://picsum.photos/300/150?random=7"
        },
        {
          id: 8,
          title: "央行降准政策落地，市场流动性预期改善",
          content: "央行宣布降准政策正式落地，将释放长期资金约1万亿元。这一政策举措有望改善市场流动性状况，为实体经济发展提供更好的资金支持...",
          author: "由PolicyWatch提供",
          date: "7月29",
          comments: 6,
          likes: 15,
          image: "https://picsum.photos/300/150?random=8"
        }
      ];
      
      // 洗牌函数
      function shuffleArray(array) {
        const newArray = [...array];
        for (let i = newArray.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
        }
        return newArray;
      }
      
      // 生成新闻卡片HTML
      function generateNewsCard(news) {
        return `
          <div class="bg-secondary rounded-lg p-4 border border-border-color card-hover shadow-sm">
            <div class="mb-2">
              <img src="${news.image}" alt="文章配图" class="w-full h-auto rounded-md">
            </div>
            <h3 class="text-lg font-semibold mb-2 text-neutral-dark">
              ${news.title}
            </h3>
            <p class="text-sm text-neutral mb-4">
              ${news.content}
            </p>
            <div class="flex items-center justify-between">
              <div class="flex items-center space-x-2">
                <span class="text-xs text-neutral">${news.author}</span>
                <span class="text-xs text-neutral">${news.date}</span>
              </div>
              <div class="flex items-center space-x-2">
                <button class="text-neutral hover:text-neutral-dark transition-colors">
                  <i class="fa fa-comment"></i> ${news.comments || ''}
                </button>
                <button class="text-neutral hover:text-neutral-dark transition-colors">
                  <i class="fa fa-rocket"></i> ${news.likes}
                </button>
              </div>
            </div>
          </div>
        `;
      }
      
      // 渲染新闻
      function renderNews() {
        const newsContainer = document.getElementById('newsContainer');
        if (newsContainer) {
          const shuffledNews = shuffleArray(newsData);
          const newsToShow = shuffledNews.slice(0, 3); // 只显示3条新闻
          
          newsContainer.innerHTML = newsToShow.map(news => generateNewsCard(news)).join('');
        }
      }
      
      // 页面加载完成后渲染新闻
      renderNews();
    });
  </script>
  <script src="./js/scripts.js"></script>
</body>
</html>